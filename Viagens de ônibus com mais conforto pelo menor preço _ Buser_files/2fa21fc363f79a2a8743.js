(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1091:function(e,t,r){},1094:function(e,t,r){},1130:function(e,t,r){},1131:function(e,t,r){},1149:function(e,t,r){e.exports=r.p+"img/buser_popup_sr.619fbc6.svg"},1150:function(e,t,r){},153:function(e,t,r){"use strict";r.r(t);var o=r(354);t.default=o.default},1868:function(e,t,r){"use strict";r(1091)},1871:function(e,t,r){"use strict";r(1094)},1912:function(e,t,r){e.exports=r.p+"img/background-top-mobile.762ff04.jpg"},1913:function(e,t,r){"use strict";r(1130)},1914:function(e,t,r){"use strict";r(1131)},1942:function(e,t,r){"use strict";r(1150)},1969:function(e,t,r){"use strict";r.r(t);r(32),r(95);var o={props:{siteKey:{type:String,default:""},dataTheme:{default:"light",type:String,validator:function(e){return["dark","light"].includes(e)}},dataSize:{default:null,type:String,validator:function(e){return["compact","normal","invisible"].includes(e)}},dataBadge:{default:"bottomright",type:String,validator:function(e){return["bottomright","bottomleft","inline"].includes(e)}},dataTabindex:{default:0,type:Number}},beforeDestroy:function(){this.$recaptcha.destroy()},mounted:function(){this.$recaptcha.init(),this.$recaptcha.on("recaptcha-error",this.onError),this.$recaptcha.on("recaptcha-success",this.onSuccess),this.$recaptcha.on("recaptcha-expired",this.onExpired)},computed:{computedDataSize:function(){return this.dataSize||this.$recaptcha.size||"normal"}},methods:{onError:function(e){return this.$emit("error",e)},onSuccess:function(e){return this.$emit("success",e)},onExpired:function(){return this.$emit("expired")}}},n=r(4),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"g-recaptcha",attrs:{"data-sitekey":e.siteKey||e.$recaptcha.siteKey,"data-size":e.computedDataSize,"data-theme":e.dataTheme,"data-badge":e.dataBadge,"data-tabindex":e.dataTabindex,"data-callback":"recaptchaSuccessCallback","data-expired-callback":"recaptchaExpiredCallback","data-error-callback":"recaptchaErrorCallback"}})}),[],!1,null,null,null);t.default=component.exports},1978:function(e,t,r){"use strict";r.r(t);r(12),r(13),r(20),r(21);var o=r(7),n=r(2),c=(r(14),r(57),r(58),r(33),r(16),r(17),r(38)),l=r(0),m=r(3),d=r(25),f=r(19),v=r(1),h=r(63);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y="closed_promo_popup_V2",_="promo",w={name:"popup-cupom-disponivel",data:function(){return{phone:"",rules:c.a,temCupomNoCookie:!1,cookieCupom:null,closedPopup:!1,showAlwaysSettings:!1,popupPromoVisible:!1,loading:!1}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.closedPopup="sim"===d.a.getItem(y),e.showAlwaysSettings=e.$store.state.settings.settings.popup_capturar_lead_show_always,!d.a.getItem(_)){t.next=16;break}return e.temCupomNoCookie=!0,t.prev=4,t.next=7,m.a.passenger.promocao(d.a.getItem(_));case 7:e.cookieCupom=t.sent,t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(4),400!==(null===(r=t.t0.response)||void 0===r?void 0:r.status)&&404!==(null===(o=t.t0.response)||void 0===o?void 0:o.status)){t.next=15;break}return e.$store.commit("toast/open",{message:"Não foi possível ativar o cupom.",type:"error"}),t.abrupt("return");case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[4,10]])})))()},computed:x(x({},Object(f.mapGetters)({loggedIn:"auth/loggedIn",results:"search/getResults",cupons:"reservation/getCuponsDisponiveis"})),{},{valorDoCupomFormatado:function(){return this.cupom.discount?(100*this.cupom.discount).toString()+"%":v.default.options.filters.real(this.cupom.value)},menorValorComDesconto:function(){return this.cupom.discount?this.reservaMaisBarata*(1-this.cupom.discount):Math.max(this.reservaMaisBarata-this.cupom.value,0)},cupom:function(){var e=this;if(this.loggedIn&&!this.closedPopup&&this.showAlwaysSettings)return this.cookieCupom?this.cookieCupom:this.cupons.reduce((function(t,r){return e.reservaMaisBarataComCupom(r)<e.reservaMaisBarataComCupom(t)?r:t}),this.reservaMaisBarata)},reservaMaisBarata:function(){var e,t,r=this;if(null===(e=this.results)||void 0===e||!e.groups_by_date)return 0;var o=null===(t=this.results)||void 0===t?void 0:t.groups_by_date.reduce((function(e,t){return e.concat(t.grupos.filter(r.reservaDisponivel).map((function(e){return e.max_split_value})))}),[]);if(0===o.length)return 0;var n=o.reduce((function(e,t){return t<e?t:e}));return Math.max(n,0)},popupIsReady:function(){var e,t,r,o;return!!this.cupom&&(null===(e=this.results)||void 0===e||null===(t=e.groups_by_date)||void 0===t||null===(r=t[0])||void 0===r||null===(o=r.grupos)||void 0===o?void 0:o.length)>0}}),methods:{activatePromo:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,m.a.passenger.promocao(e.cupom.code);case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return",!1);case 7:if(!r.error){t.next=10;break}return e.$store.commit("toast/open",{message:r.error,type:"error"}),t.abrupt("return",!1);case 10:return t.next=12,m.a.passenger.salvaPromoLeadAnon(e.cupom.code);case 12:e.salvaCupomNoLeadDoUser(e.$store.state.auth.currentUser),d.a.setItem("promo",e.cupom.code),e.$store.commit("reservation/setPromoCode",e.cupom.code),e.$emit("cupomAdicionado"),l.a.$emit("popup-promo-ativou","search-result"),e.closeAccepted(),window.location.reload(),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(1),h.a.captureException(t.t0),e.$store.commit("toast/open",{message:t.t0,type:"error"});case 25:return t.prev=25,e.loading=!1,t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[1,21,25,28]])})))()},salvaCupomNoLeadDoUser:function(e){var t={email:e.email,url:this.$route.fullPath,attributes:[{key:"cupom",value:this.cupom.code}]};m.a.everyone.saveLead(t)},reservaDisponivel:function(e){return e.status in{pending:1,travel_confirmed:1}&&!e.closed&&e.vagas>0},close:function(){this.popupPromoVisible=!1,this.closedPopup=!0,d.a.setItem(y,"sim",7)},closeAccepted:function(){this.popupPromoVisible=!1,this.closedPopup=!0,d.a.setItem(y,"sim",1)},show:function(){var e;null!==(e=this.cupom)&&void 0!==e&&e.code&&(this.popupPromoVisible=!0,l.a.$emit("popup-promo-visualizou","search-result"))},reservaMaisBarataComCupom:function(e){return this.reservaMaisBarata?e.discount?this.reservaMaisBarata*(1-e.discount):e.value?this.reservaMaisBarata-e.value:this.reservaMaisBarata:0}}},k=(r(1942),r(4)),component=Object(k.a)(w,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ada-modal",{staticClass:"popup-cupom-disponivel",attrs:{"max-width":"400px",persistent:""},model:{value:e.popupPromoVisible,callback:function(t){e.popupPromoVisible=t},expression:"popupPromoVisible"}},[e.cupom&&!e.temCupomNoCookie?o("ada-container",{staticClass:"pcd-container"},[e.cupom&&!e.temCupomNoCookie?o("div",{staticClass:"pcdc-top"},[o("img",{staticClass:"pcdct-icon",attrs:{src:r(1149)}}),e._v(" "),o("p",{staticClass:"pcdct-title"},[e._v("Reserve sua viagem agora e ganhe "+e._s(e.valorDoCupomFormatado)+" de desconto!")]),e._v(" "),o("p",{staticClass:"pcdct-subtitle"},[e._v("Resgate o cupom e sua viagem ficará "),o("strong",{staticClass:"fw-bold"},[e._v("a partir de "+e._s(e._f("real")(e.menorValorComDesconto))+".")])])]):e._e(),e._v(" "),e.loading?o("div",{staticClass:"pcdc-bottom"},[o("ada-loader")],1):o("div",{staticClass:"pcdc-bottom"},[o("ada-button",{attrs:{block:"",color:"primary",type:"submit"},on:{"~click":function(t){return e.activatePromo.apply(null,arguments)}}},[e._v("\n        Resgatar meu cupom "+e._s(e.valorDoCupomFormatado)+"\n      ")]),e._v(" "),o("div",{staticClass:"mt-1"},[o("ada-button",{attrs:{block:"",color:"primary",transparent:""},on:{click:e.close}},[e._v("\n          Não quero usar meu cupom\n        ")])],1)],1)]):e._e(),e._v(" "),e.cupom&&e.temCupomNoCookie?o("ada-container",{staticClass:"pcd-container"},[o("div",{staticClass:"pcdc-top"},[o("img",{staticClass:"pcdct-icon",attrs:{src:r(1149)}}),e._v(" "),o("p",{staticClass:"pcdct-title"},[e._v("Resgate seu cupom de  "+e._s(e.valorDoCupomFormatado)+" antes que ele expire!")]),e._v(" "),o("p",{staticClass:"pcdct-subtitle"},[e._v("Você tem um cupom de "+e._s(e.valorDoCupomFormatado)+" ativado que irá expirar "),o("strong",{staticClass:"fw-bold"},[e._v("em "+e._s(e._f("date")(e.cupom.due_date)))])])]),e._v(" "),e.loading?o("div",{staticClass:"pcdc-bottom"},[o("ada-loader")],1):o("div",{staticClass:"pcdc-bottom"},[o("ada-button",{staticClass:"mt-1",attrs:{block:"",color:"primary",type:"submit"},on:{"~click":function(t){return e.activatePromo.apply(null,arguments)}}},[e._v("\n        Resgatar cupom de "+e._s(e.valorDoCupomFormatado)+"\n      ")]),e._v(" "),o("div",{staticClass:"mt-1"},[o("ada-button",{attrs:{block:"",color:"primary",transparent:""},on:{click:e.close}},[e._v("\n          Não quero usar meu cupom\n        ")])],1)],1)]):e._e()],1)}),[],!1,null,"abfa5a42",null);t.default=component.exports},1981:function(e,t,r){"use strict";r.r(t);var o=r(7),n=(r(10),r(33),r(16),r(12),r(13),r(20),r(21),r(192)),c=r(29);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={props:{topDestinos:{type:Array,default:function(){return[]}}},components:{adaLink:n.a},methods:{getThumbImage:function(e){return e&&e.thumb},goToDestino:function(e,t){var r={origem:e.slug,destino:t.slug};c.a.push("searchPageV1",this.$route.name,r,this.$route.query,this.$router)},goToIndoPara:function(e){var t={destino:e.slug};c.a.push("searchOriginPageV1",this.$route.name,t,this.$route.query,this.$router)}},computed:{centerMode:function(){return window.outerWidth<768},destinos:function(){var e=this;return this.topDestinos.filter((function(e){return e.indo_para&&e.indo_para.length})).map((function(t){var o=e.getThumbImage(t);return m(m({},t),{},{image_url:o&&o.url||t.picture_url||r(1912),alt:o&&o.descricao||"Ônibus para ".concat(t.cidade)})}))}}},f=(r(1913),r(4)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"destino-carrosel"},[r("ada-carrosel",{attrs:{"number-of-items":e.destinos.length,"center-mode":e.centerMode}},e._l(e.destinos,(function(t){return r("div",{key:t.name,staticClass:"p-2",style:{height:"100%"}},[r("ada-card",{staticClass:"dc-card",attrs:{outlined:"",rounded:""}},[r("div",{staticClass:"ac-image"},[r("div",{staticClass:"ada-image ai-title-background ai-obj-fit-cover"},[r("div",{staticClass:"ai-title"},[r("h3",[r("span",{staticClass:"text-4 text-white d-block"},[e._v("Ônibus para")]),e._v(" "),r("strong",{staticClass:"title-1 text-white"},[e._v(e._s(t.cidade))])])]),e._v(" "),r("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":t.image_url,alt:t.alt,width:"344",height:"150"}})])]),e._v(" "),r("div",{staticClass:"dc-card-content"},[r("div",{staticClass:"px-3 pt-3"},[r("div",{staticClass:"d-flex jc-between"},[r("p",{staticClass:"fw-bold text-2"},[e._v("Saindo de")]),e._v(" "),r("p",{staticClass:"fw-bold text-2"},[e._v("Preços a partir de")])]),e._v(" "),r("ada-divider",{staticClass:"my-1",attrs:{color:"light"}}),e._v(" "),r("ul",{staticClass:"mb-1"},e._l(t.indo_para,(function(o){return r("li",{key:"place"+o.slug},[r("ada-link",{staticClass:"d-flex jc-between py-1 dc-city-link",attrs:{to:{name:"searchPageV1",params:{origem:o.slug,destino:t.slug}}}},[r("strong",{staticClass:"fw-bold dc-city-link-text text-2"},[e._v(e._s(o.name))]),e._v(" "),r("span",{staticClass:"dc-city-link-text text-2"},[e._v("\n                    R$ "+e._s(e._f("number")(o.best_price,2))+"\n                  ")])])],1)})),0)],1),e._v(" "),r("div",[r("ada-divider",{attrs:{color:"light"}}),e._v(" "),r("div",{staticClass:"py-2 px-3"},[r("ada-link",{staticClass:"text-2",attrs:{to:{name:"searchDestinationPageV1",params:{destino:t.slug}}}},[e._v("Ver todos ônibus para "+e._s(t.cidade))])],1)],1)])])],1)})),0)],1)}),[],!1,null,"73d3de84",null);t.default=component.exports},1982:function(e,t,r){"use strict";r.r(t);var o=r(0),n={props:{promos:{type:Array,default:function(){return[]}}},computed:{centerMode:function(){return window.outerWidth<768}},methods:{clickedCarrosselItem:function(e){o.a.$emit("clicou-carrossel-home",{card_clicado:e})}}},c=(r(1914),r(4)),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.promos.length?r("div",{staticClass:"cupons-carrosel"},[r("ada-carrosel",{attrs:{"number-of-items":e.promos.length,"center-mode":e.centerMode}},e._l(e.promos,(function(t){return r("div",{key:t.code,staticClass:"px-2"},[r("div",{staticClass:"dc-card"},[r("div",{staticClass:"ac-image"},[r("div",{staticClass:"ada-image ai-obj-fit-cover"},[r("ada-link",{staticClass:"d-flex jc-between py-1",attrs:{href:t.path?t.path:"/promo/"+t.code},nativeOn:{click:function(r){return e.clickedCarrosselItem(t.code)}}},[r("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],staticClass:"cupom-image",attrs:{"data-src":t.promo_image,alt:""+t.description,width:"344",height:"150"}})])],1)])])])})),0)],1):e._e()}),[],!1,null,"042cfe8b",null);t.default=component.exports},352:function(e,t,r){"use strict";r.r(t);r(12),r(13),r(16),r(20),r(21);var o=r(2),n=r(7),c=(r(17),r(10),r(19)),l=r(3),m=r(28),d=r(38),f=r(0),v=r(29);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={layout:"andromeda",middleware:"logged-user",data:function(){return{rules:d.a,loading:!1,form:{email:"",phone:"",code:""}}},computed:C({},Object(c.mapState)({currentUser:function(e){return e.auth.currentUser}})),mounted:function(){var e;f.a.$emit("acessou-complete-registration"),this.form.email=(null===(e=this.currentUser)||void 0===e?void 0:e.email)||""},methods:C(C({},Object(c.mapMutations)({setCurrentUser:"auth/setCurrentUser"})),{},{completeRegistration:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,l.a.auth.completeRegistration({email:e.form.email,phone:e.form.phone,code:e.form.code});case 4:if(!(r=t.sent).error){t.next=7;break}throw new Error(r.error);case 7:e.form.code&&f.a.$emit("adicionou-cupom",{cupom:e.form.code,source:"cadastro"}),f.a.$emit("registration-completed"),e.setCurrentUser(r.user),e.$store.commit("toast/open",{message:"Cadastro completado com sucesso!",type:"success"}),v.a.push(e.$route.query.next||"/",e.$route.name,null,null,e.$router),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),o=t.t0.message||"Ocorreu um erro ao completar seu cadastro",e.$store.commit("toast/open",{message:o,type:"error"});case 18:return t.prev=18,e.loading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,14,18,21]])})))()}}),head:function(){return C({},m.a.generateMetaTags({title:"Completar cadastro",robots:"noindex, nofollow"}))}},y=(r(1868),r(4)),component=Object(y.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"completar-cadastro"},[r("ada-card",{staticClass:"cc-card",attrs:{outlined:e.$andromeda.breakpoint.lgAndUp,rounded:""}},[r("h1",{staticClass:"title-1 mb-1"},[e._v("Complete seu cadastro")]),e._v(" "),r("p",{staticClass:"mb-3"},[e._v("Precisamos de algumas informações suas para continuar.")]),e._v(" "),r("ada-form",{on:{submit:function(t){return t.preventDefault(),e.completeRegistration.apply(null,arguments)}}},[r("ada-input",{staticClass:"mb-3",attrs:{rules:[e.rules.required,e.rules.email,e.rules.maxlen(150)],disabled:!e.currentUser||!!e.currentUser.email,label:"Email",name:"email",placeholder:"Digite seu email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),r("ada-input",{staticClass:"mb-3",attrs:{rules:[e.rules.required,e.rules.phone_mobile_br,e.rules.maxlen(15)],label:"Celular",name:"phone",inputmode:"numeric",placeholder:"Digite seu celular",mask:"(00) 00000-0000"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e._v(" "),r("ada-input",{attrs:{rules:[e.rules.maxlen(16)],placeholder:"Digite o código do convite",label:"Convite (opcional)",name:"code"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),e._v(" "),r("ada-button",{staticClass:"mt-3",attrs:{disabled:e.loading,type:"submit",block:""}},[e.loading?[e._v("Enviando...")]:[e._v("Continuar")]],2)],1)],1)],1)}),[],!1,null,"f5b96ad0",null);t.default=component.exports},354:function(e,t,r){"use strict";r.r(t);var o=r(7),n=r(2),c=(r(10),r(12),r(13),r(16),r(20),r(21),r(17),r(3)),l=r(38),m=r(28),d=r(29),f=r(211);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var h={layout:"andromeda",props:{token:{type:String,required:!0}},components:{fuiConvidadoSkeleton:f.default},data:function(){return{initializing:!0,redirecting:!1,invitationClaim:{},invitationClaimError:"",email:"",error:"",rules:l.a}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.auth.getInvitationClaim(e.token);case 3:e.invitationClaim=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.invitationClaimError=t.t0.message||"Ocorreu um erro ao confirmar sua requisição";case 9:return t.prev=9,e.initializing=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()},methods:{confirm:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.error="",t.prev=1,t.next=4,c.a.auth.confirmInvitationClaim(e.token,e.email);case 4:e.$store.commit("toast/open",{message:"Convite confirmado!",type:"success"}),e.$store.dispatch("auth/whoami"),e.goToHome(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.error=t.t0.message||"Ocorreu um erro ao confirmar o convite, tente novamente mais tarde";case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},goToHome:function(){this.redirecting=!0,d.a.push("home",this.$route.name,null,null,this.$router)}},head:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({link:[{rel:"canonical",href:"https://www.buser.com.br/fuiconvidado"}]},m.a.generateMetaTags({title:"Convite",robots:"noindex, nofollow"}))}},C=h,x=(r(1871),r(4)),component=Object(x.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fui-convidado"},[e.initializing?r("fui-convidado-skeleton",{attrs:{"data-testid":"loader"}}):e.invitationClaimError?[r("fa",{staticClass:"text-error mt-2 mb-2",attrs:{size:"3x",icon:["fal","circle-xmark"]}}),e._v(" "),r("p",{staticClass:"fw-bold mb-2"},[e._v(e._s(e.invitationClaimError))]),e._v(" "),r("ada-button",{staticClass:"fc-btn",on:{click:e.goToHome}},[e._v("Voltar para a página inicial")])]:[r("div",{staticClass:"fc-content"},[r("h2",{staticClass:"title-2 fw-bold mt-1"},[e._v("Você foi convidado por "+e._s(e.invitationClaim.inviter_name)+"?")]),e._v(" "),r("p",{staticClass:"mt-1"},[e._v("Se sim, confirme preenchendo seu email para que "+e._s(e.invitationClaim.inviter_name)+" ganhe um cupom de convite.")]),e._v(" "),r("ada-form",{staticClass:"fcc-form",on:{submit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[r("ada-input",{attrs:{label:"Email",maxlength:"150",rules:[e.rules.required,e.rules.email]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),e.error?r("p",{staticClass:"text-error fw-bold mt-3"},[e._v("\n          "+e._s(e.error)+"\n        ")]):e._e(),e._v(" "),r("div",{staticClass:"d-flex fd-column mt-2"},[r("ada-button",{staticClass:"fcc-btn",attrs:{block:"",type:"submit"}},[e._v("Confirmar")]),e._v(" "),r("ada-button",{staticClass:"fcc-btn",attrs:{outlined:"",block:""},on:{click:e.goToHome}},[e._v("Não, nem sei quem é")])],1)],1),e._v(" "),r("transition",{attrs:{name:"fade"}},[e.redirecting?r("div",{staticClass:"fcc-redirecting"},[r("ada-loader"),e._v(" "),r("p",{staticClass:"fw-bold mt-3"},[e._v("Redirecionando...")])],1):e._e()])],1)]],2)}),[],!1,null,"137e1a86",null);t.default=component.exports},362:function(e,t,r){"use strict";r.r(t);var o=r(2),n=(r(17),r(27)),c=r(689),l=r.n(c),m=r(109),d=r(19),f=r(352),v=r(3),h=r(0),C=r(29);jest.mock("~api",(function(){return{auth:{completeRegistration:jest.fn()}}})),jest.mock("~/helpers/routehelper",(function(){return{push:jest.fn()}})),jest.mock("~/helpers/eventbus.js",(function(){return{$emit:jest.fn()}}));var x={currentUser:{}},y={setCurrentUser:jest.fn()},_={open:jest.fn()},w=new d.default.Store({modules:{auth:{state:x,mutations:y,namespaced:!0},toast:{mutations:_,namespaced:!0}}});function k(){return Object(n.render)(f.default,{routes:Object(m.a)(),store:w})}describe("Completar cadastro",(function(){beforeEach((function(){jest.clearAllMocks()})),it("should complete registration",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.a.auth.completeRegistration.mockResolvedValue({user:{name:"luiz"}}),k(),expect(n.screen.getByText("Complete seu cadastro")).toBeVisible(),expect(h.a.$emit).toHaveBeenCalledWith("acessou-complete-registration"),l.a.type(n.screen.getByLabelText("Email"),"teste@buser.com.br"),e.t0=expect,e.next=8,n.screen.findByDisplayValue("teste@buser.com.br");case 8:return e.t1=e.sent,(0,e.t0)(e.t1).toBeVisible(),l.a.type(n.screen.getByLabelText("Celular"),"12988889999"),e.t2=expect,e.next=14,n.screen.findByDisplayValue("(12) 98888-9999");case 14:return e.t3=e.sent,(0,e.t2)(e.t3).toBeVisible(),l.a.type(n.screen.getByLabelText("Convite (opcional)"),"c0d3"),l.a.click(n.screen.getByText("Continuar")),e.next=20,Object(n.waitFor)((function(){return expect(v.a.auth.completeRegistration).toHaveBeenCalledWith({email:"teste@buser.com.br",phone:"12988889999",code:"c0d3"})}));case 20:return e.next=22,Object(n.waitFor)((function(){return expect(h.a.$emit).toHaveBeenCalledWith("adicionou-cupom",{cupom:"c0d3",source:"cadastro"})}));case 22:expect(h.a.$emit).toHaveBeenCalledWith("registration-completed"),expect(y.setCurrentUser).toHaveBeenCalledWith(expect.anything(),{name:"luiz"}),expect(_.open).toHaveBeenCalledWith(expect.anything(),{message:"Cadastro completado com sucesso!",type:"success"}),expect(C.a.push).toHaveBeenCalledWith("/","home",null,null,expect.anything());case 26:case"end":return e.stop()}}),e)})))),it("should disable email when already present",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.currentUser={email:"luiz@buser.com.br"},k(),expect(n.screen.getByText("Complete seu cadastro")).toBeVisible(),expect(n.screen.getByLabelText("Email")).toBeDisabled(),e.t0=expect,e.next=7,n.screen.findByDisplayValue("luiz@buser.com.br");case 7:e.t1=e.sent,(0,e.t0)(e.t1).toBeVisible();case 9:case"end":return e.stop()}}),e)})))),it("should show error from backend",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.a.auth.completeRegistration.mockResolvedValue({error:"error message"}),k(),l.a.type(n.screen.getByLabelText("Email"),"luiz@buser.com.br"),e.t0=expect,e.next=6,n.screen.findByDisplayValue("luiz@buser.com.br");case 6:return e.t1=e.sent,(0,e.t0)(e.t1).toBeVisible(),l.a.type(n.screen.getByLabelText("Celular"),"12988889999"),e.t2=expect,e.next=12,n.screen.findByDisplayValue("(12) 98888-9999");case 12:return e.t3=e.sent,(0,e.t2)(e.t3).toBeVisible(),l.a.click(n.screen.getByText("Continuar")),e.next=17,Object(n.waitFor)((function(){return expect(v.a.auth.completeRegistration).toHaveBeenCalled()}));case 17:return e.next=19,Object(n.waitFor)((function(){return expect(_.open).toHaveBeenCalledWith(expect.anything(),{message:"error message",type:"error"})}));case 19:case"end":return e.stop()}}),e)}))))}))},364:function(e,t,r){"use strict";r.r(t);var o=r(2),n=(r(17),r(27)),c=r(689),l=r.n(c),m=r(19),d=r(3),f=r(29),v=r(109),h=r(153);jest.mock("~api",(function(){return{auth:{getInvitationClaim:jest.fn(),confirmInvitationClaim:jest.fn()}}})),jest.mock("~/helpers/routehelper",(function(){return{push:jest.fn()}}));var C={open:jest.fn()},x={whoami:jest.fn()},y=new m.default.Store({modules:{toast:{mutations:C,namespaced:!0},auth:{actions:x,namespaced:!0}}}),_=function(e){return Object(n.render)(h.default,{routes:Object(v.a)(),props:e,store:y,stubs:["fa"]})};describe("Fui convidado",(function(){beforeEach((function(){jest.clearAllMocks()})),it("should render with expired link",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.a.auth.getInvitationClaim.mockRejectedValue(new Error("deu ruim")),_({token:"13"}),e.next=4,Object(n.waitFor)((function(){return expect(n.screen.getByText("deu ruim")).toBeVisible()}));case 4:return e.next=6,l.a.click(n.screen.getByRole("button",{name:"Voltar para a página inicial"}));case 6:return e.next=8,Object(n.waitFor)((function(){return expect(f.a.push).toHaveBeenCalledWith("home","home",null,null,expect.anything())}));case 8:case"end":return e.stop()}}),e)})))),it("should render with email form",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.a.auth.getInvitationClaim.mockResolvedValue({inviter_name:"Luiz"}),_({token:"123"}),e.next=4,Object(n.waitFor)((function(){return expect(n.screen.getByText("Você foi convidado por Luiz?")).toBeVisible()}));case 4:expect(n.screen.getByText("Se sim, confirme preenchendo seu email para que Luiz ganhe um cupom de convite."));case 5:case"end":return e.stop()}}),e)})))),it("should redirect to home without call confirmInvitationClaim",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.a.auth.getInvitationClaim.mockResolvedValue({inviter_name:"Luiz"}),_({token:"123"}),e.next=4,Object(n.waitFor)((function(){return expect(n.screen.getByText("Você foi convidado por Luiz?")).toBeVisible()}));case 4:return e.next=6,l.a.click(n.screen.getByRole("button",{name:"Não, nem sei quem é"}));case 6:return e.next=8,Object(n.waitFor)((function(){return expect(f.a.push).toHaveBeenCalledWith("home","home",null,null,expect.anything())}));case 8:expect(d.a.auth.confirmInvitationClaim).not.toHaveBeenCalled();case 9:case"end":return e.stop()}}),e)})))),it("should redirect to home and call confirmInvitationClaim",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.a.auth.getInvitationClaim.mockResolvedValue({inviter_name:"Luiz"}),_({token:"123"}),e.next=4,Object(n.waitFor)((function(){return expect(n.screen.getByText("Você foi convidado por Luiz?")).toBeVisible()}));case 4:return e.next=6,l.a.type(n.screen.getByLabelText("Email"),"teste@teste.com");case 6:return e.next=8,l.a.click(n.screen.getByRole("button",{name:"Confirmar"}));case 8:return e.next=10,Object(n.waitFor)((function(){return expect(f.a.push).toHaveBeenCalledWith("home","home",null,null,expect.anything())}));case 10:expect(d.a.auth.confirmInvitationClaim).toHaveBeenCalled();case 11:case"end":return e.stop()}}),e)}))))}))}}]);